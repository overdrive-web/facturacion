<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de Horas Extras</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl">
    <h1 class="text-2xl font-bold mb-4 text-center">Calculadora de Horas Extras</h1>
    <div class="mb-4">
      <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-2">
        <input id="fecha" type="date" class="border p-2 rounded" required>
        <input id="horaEntrada" type="time" class="border p-2 rounded" required>
        <input id="horaSalida" type="time" class="border p-2 rounded" required>
        <input id="motivo" type="text" class="border p-2 rounded" placeholder="Motivo" required>
        <button onclick="agregarRegistro()" class="bg-blue-500 text-white p-2 rounded hover:bg-blue-600">Agregar</button>
      </div>
    </div>
    <table class="w-full border-collapse">
      <thead>
        <tr class="bg-gray-200">
          <th class="border p-2">Fecha</th>
          <th class="border p-2">Hora Entrada</th>
          <th class="border p-2">Hora Salida</th>
          <th class="border p-2">Motivo</th>
          <th class="border p-2">Horas Extras</th>
        </tr>
      </thead>
      <tbody id="tablaRegistros"></tbody>
      <tfoot>
        <tr class="font-bold">
          <td colspan="4" class="border p-2 text-right">Total Horas Extras:</td>
          <td id="totalHorasExtras" class="border p-2">0</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <script>
    let registros = [];

    function agregarRegistro() {
      const fecha = document.getElementById('fecha').value;
      const horaEntrada = document.getElementById('horaEntrada').value;
      const horaSalida = document.getElementById('horaSalida').value;
      const motivo = document.getElementById('motivo').value;

      if (!fecha || !horaEntrada || !horaSalida || !motivo) {
        alert('Por favor, completa todos los campos.');
        return;
      }

      const horasExtras = calcularHorasExtras(horaEntrada, horaSalida);
      registros.push({ fecha, horaEntrada, horaSalida, motivo, horasExtras });
      actualizarTabla();
      limpiarFormulario();
    }

    function calcularHorasExtras(horaEntrada, horaSalida) {
      const entrada = new Date(`2025-01-01T${horaEntrada}:00`);
      const salida = new Date(`2025-01-01T${horaSalida}:00`);
      if (salida < entrada) salida.setDate(salida.getDate() + 1);
      const diferenciaMs = salida - entrada;
      const horasTotales = diferenciaMs / (1000 * 60 * 60);
      const horasExtras = Math.max(0, horasTotales - 9);
      return Math.round(horasExtras * 100) / 100;
    }

    function actualizarTabla() {
      const tabla = document.getElementById('tablaRegistros');
      tabla.innerHTML = '';
      let totalHoras = 0;

      registros.forEach(registro => {
        const fila = document.createElement('tr');
        fila.innerHTML = `
          <td class="border p-2">${registro.fecha}</td>
          <td class="border p-2">${registro.horaEntrada}</td>
          <td class="border p-2">${registro.horaSalida}</td>
          <td class="border p-2">${registro.motivo}</td>
          <td class="border p-2">${registro.horasExtras}</td>
        `;
        tabla.appendChild(fila);
        totalHoras += registro.horasExtras;
      });

      document.getElementById('totalHorasExtras').textContent = Math.round(totalHoras * 100) / 100;
    }

    function limpiarFormulario() {
      document.getElementById('fecha').value = '';
      document.getElementById('horaEntrada').value = '';
      document.getElementById('horaSalida').value = '';
      document.getElementById('motivo').value = '';
    }
  </script>
</body>
</html>
